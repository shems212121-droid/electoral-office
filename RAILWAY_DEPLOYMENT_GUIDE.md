# ุฏููู ุงููุดุฑ ุนูู Railway - ูุนุงูุฌุฉ ุฎุทุฃ 500

## ุงููุดููุฉ ุงูุญุงููุฉ
ุงููููุน ูุนุทู ุฎุทุฃ Server Error (500) ุนูู Railway

## ุงูุณุจุจ
- Railway ูุณุชุฎุฏู ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL ูุงุฑุบุฉ
- ุงูุจูุงูุงุช ุงููุญููุฉ (1,868,933 ูุงุฎุจ) ููุฌูุฏุฉ ูู SQLite
- ูู ูุชู ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅูู Railway

## ุงูุญู ุงููุทุจูู

### ุงูุฎุทูุฉ 1: ุฅุนุฏุงุฏ ุงููููุงุช (โ ุชู)
- [x] ุชูุนูู `user_profile_context` ูู settings_production.py
- [x] ุชุญุฏูุซ .gitignore ููุณูุงุญ ุจุฑูุน db.sqlite3
- [x] ุงูุชุฃูุฏ ูู ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุตุญูุญุฉ

### ุงูุฎุทูุฉ 2: ุฑูุน ุงูุชุบููุฑุงุช ุฅูู GitHub

ูู ุจุชูููุฐ ุงูุฃูุงูุฑ ุงูุชุงููุฉ:

```powershell
# 1. ุฅุถุงูุฉ ุฌููุน ุงูุชุบููุฑุงุช
git add .

# 2. ุฅูุดุงุก commit
git commit -m "Fix 500 error: Enable context processor and prepare db for deployment"

# 3. ุฑูุน ุงูุชุบููุฑุงุช
git push origin main
```

### ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏุงุช Railway

#### A. ุงูุชุญูู ูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ
ุงูุชูู ุฅูู Railway Dashboard โ Variables ูุชุฃูุฏ ูู:

```
DJANGO_SETTINGS_MODULE=electoral_office.settings_production
DEBUG=True
ALLOWED_HOSTS=web-production-42c39.up.railway.app
SECRET_KEY=<your-secret-key-here>
```

#### B. ุญุฐู ุฎุฏูุฉ PostgreSQL (ุฅู ูุฌุฏุช)
1. ุงุฐูุจ ุฅูู Railway Dashboard
2. ุฅุฐุง ูุงูุช ููุงู ุฎุฏูุฉ PostgreSQLุ ุงุญุฐููุง
3. ุณูุณุชุฎุฏู SQLite ูู ุงููุณุชูุฏุน

#### C. ุฅุนุงุฏุฉ ุงููุดุฑ
1. ุงุฐูุจ ุฅูู Deployments
2. ุงุถุบุท Redeploy
3. ุงูุชุธุฑ ุญุชู ููุชูู ุงููุดุฑ

### ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงููุดุฑ

ุจุนุฏ ุงูุชูุงุก ุงููุดุฑ:

1. ุงูุชุญ: https://web-production-42c39.up.railway.app/test-ping/
   - ูุฌุจ ุฃู ุชุฑู: "Pong - System is Active"

2. ุงูุชุญ: https://web-production-42c39.up.railway.app/
   - ูุฌุจ ุฃู ุชุฑู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

3. ุณุฌู ุฏุฎูู ุจุงุณุชุฎุฏุงู:
   - Username: admin
   - Password: admin123

### ุงูุฎุทูุฉ 5: ูุฑุงูุจุฉ ุงูุณุฌูุงุช (Logs)

ูู ุญุงูุฉ ุงุณุชูุฑุงุฑ ุงูุฎุทุฃ:
1. ุงุฐูุจ ุฅูู Railway โ Deployments โ View Logs
2. ุงุจุญุซ ุนู ุฑุณุงุฆู ุงูุฎุทุฃ
3. ุฃุฑุณู ูู ูุต ุงูุฎุทุฃ ูููุณุงุนุฏุฉ

## ููุงุญุธุงุช ูููุฉ

### โ๏ธ ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุญุฌู ุงูุญุงูู: ~1.15 GB
- GitHub ูุฏูู ุญุฏ ุฃูุตู ููููู: 100 MB
- **ูุฐุง ูุฏ ูุณุจุจ ูุดููุฉ!**

### ๐ ุญู ุจุฏูู ุฅุฐุง ูุงู ุงูููู ูุจูุฑุงู

ุฅุฐุง ุฑูุถ Git ุฑูุน ุงูููู ุจุณุจุจ ุงูุญุฌู:

#### ุงูุญู 1: ุงุณุชุฎุฏุงู Git LFS
```powershell
# ุชุซุจูุช Git LFS
git lfs install

# ุชุชุจุน ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช
git lfs track "db.sqlite3"

# ุฅุถุงูุฉ .gitattributes
git add .gitattributes

# ุฑูุน ุงูุชุบููุฑุงุช
git add db.sqlite3
git commit -m "Add database using Git LFS"
git push origin main
```

#### ุงูุญู 2: ุถุบุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
```powershell
# ุถุบุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
python -c "import gzip, shutil; shutil.copyfileobj(open('db.sqlite3', 'rb'), gzip.open('db.sqlite3.gz', 'wb'))"

# ุฑูุน ุงูููู ุงููุถุบูุท
git add db.sqlite3.gz
git commit -m "Add compressed database"
git push origin main
```

ุซู ุนุฏูู Procfile ููู ุงูุถุบุท ุนูุฏ ุงูุชุดุบูู:
```
release: gunzip -c db.sqlite3.gz > db.sqlite3 && python manage.py collectstatic --noinput && python manage.py create_admin
```

#### ุงูุญู 3: ุงุณุชุฎุฏุงู Railway Volume (ุงูุฃูุถู)
1. ุฅูุดุงุก Volume ูู Railway
2. ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ
3. ุฑุจุท Volume ุจุงููุดุฑูุน

### ๐ ุญู ุทููู ุงูุฃูุฏ: PostgreSQL

ููุฅูุชุงุฌ ุงููุนููุ ูููุถููู:
1. ุฅูุดุงุก ูุงุนุฏุฉ PostgreSQL ุนูู Railway
2. ุชุตุฏูุฑ ุงูุจูุงูุงุช ูู SQLite
3. ุงุณุชูุฑุงุฏูุง ุฅูู PostgreSQL

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุญู ุงููุดููุฉ:
1. [ ] ุชุนุทูู DEBUG (DEBUG=False)
2. [ ] ุชุบููุฑ ูููุฉ ูุฑูุฑ ุงููุฏูุฑ
3. [ ] ุชูุนูู HTTPS
4. [ ] ุถุจุท ุฅุนุฏุงุฏุงุช ุงูุฃูุงู

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2026-01-12
**ุงูุญุงูุฉ:** ุฌุงูุฒ ูููุดุฑ (ูู ุงูุชุธุงุฑ ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช)
