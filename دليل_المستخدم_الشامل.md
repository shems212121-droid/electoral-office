# دليل المستخدم الشامل
# برنامج المكتب الانتخابي

---

## جدول المحتويات

1. [المقدمة](#المقدمة)
2. [نظام الأدوار والصلاحيات](#نظام-الأدوار-والصلاحيات)
3. [إدارة المرشحين](#إدارة-المرشحين)
4. [إدارة المرتكزات](#إدارة-المرتكزات)
5. [إدارة المعرفين](#إدارة-المعرفين)
6. [إدارة الناخبين](#إدارة-الناخبين)
7. [إدارة المراقبين](#إدارة-المراقبين)
8. [نظام توليد بيانات الدخول](#نظام-توليد-بيانات-الدخول)
9. [لوحات التحكم](#لوحات-التحكم)
10. [غرف العمليات الفرعية](#غرف-العمليات-الفرعية)
11. [إدخال النتائج](#إدخال-النتائج)
12. [التقارير والإحصائيات](#التقارير-والإحصائيات)
13. [الأدوات المساعدة](#الأدوات-المساعدة)
14. [الميزات التقنية](#الميزات-التقنية)

---

## المقدمة

### نظرة عامة عن البرنامج

برنامج **المكتب الانتخابي** هو نظام إدارة انتخابية متكامل مصمم خصيصاً لإدارة الحملات الانتخابية بكفاءة عالية. يوفر البرنامج أدوات شاملة لتنظيم وتتبع المرشحين، المرتكزات، المعرفين، الناخبين، والمراقبين، بالإضافة إلى إدخال النتائج وإنشاء التقارير التفصيلية.

### أهداف البرنامج

- **تنظيم البيانات**: إدارة مركزية لجميع بيانات الحملة الانتخابية
- **تتبع الأداء**: مراقبة الإحصائيات والمؤشرات الرئيسية
- **إدارة الصلاحيات**: نظام أدوار متعدد المستويات
- **سهولة الوصول**: واجهات مستخدم مخصصة لكل دور
- **التقارير الشاملة**: إنشاء تقارير مفصلة بصيغ متعددة

### المستخدمون المستهدفون

- مدراء الحملات الانتخابية
- الطواقم الإدارية
- مدخلو البيانات
- المرشحون
- فرق الدعم الفني
- مشرفو غرف العمليات

---

## نظام الأدوار والصلاحيات

يوفر البرنامج نظام أدوار متقدم يضمن أن كل مستخدم يحصل على الصلاحيات المناسبة لمهامه.

### 1. مدير النظام (Admin)

**الصلاحيات:**
- الوصول الكامل لجميع وحدات البرنامج
- إدارة المستخدمين والصلاحيات
- توليد بيانات الدخول للمستخدمين
- عرض وتعديل جميع البيانات
- حذف السجلات
- تصدير التقارير
- إدارة غرف العمليات

**لوحة التحكم:** `/dashboard/admin/`

**الاستخدام الموصى به:**
- مسؤول النظام الرئيسي
- مدير الحملة الانتخابية

### 2. المشرف (Supervisor)

**الصلاحيات:**
- عرض جميع البيانات
- إضافة وتعديل السجلات
- تصدير التقارير
- إدارة المهام
- عرض سجلات الاتصالات
- *لا يمكنه:* إدارة المستخدمين أو حذف السجلات

**لوحة التحكم:** `/dashboard/supervisor/`

**الاستخدام الموصى به:**
- مشرف فريق العمل
- منسق الحملة

### 3. مدخل البيانات (Data Entry)

يتفرع إلى عدة أدوار متخصصة:

#### 3.1 مدخل بيانات الناخبين
- إضافة وتعديل بيانات الناخبين
- البحث عن الناخبين
- تصنيف الناخبين

#### 3.2 مدخل بيانات المرشحين
- إدارة بيانات المرشحين
- إضافة معلومات المرشحين

#### 3.3 مدخل بيانات المرتكزات
- إضافة المرتكزات
- ربط المرتكزات بالمرشحين

#### 3.4 مدخل بيانات المعرفين
- إدارة المعرفين
- ربط المعرفين بالمرتكزات

#### 3.5 مدخل بيانات المراقبين
- تسجيل المراقبين
- إصدار الباجات

#### 3.6 مدخل النتائج
- إدخال نتائج الاقتراع
- التحقق من البيانات المدخلة

**لوحة التحكم:** `/dashboard/data-entry/`

### 4. المستعرض (Viewer)

**الصلاحيات:**
- عرض البيانات فقط
- *لا يمكنه:* التعديل أو الحذف أو الإضافة

**لوحة التحكم:** `/dashboard/viewer/`

### 5. المرشح (Candidate) - جديد

**الصلاحيات:**
- عرض المرتكزات الخاصة به
- عرض المعرفين المرتبطين به
- عرض الناخبين التابعين له
- عرض المراقبين المعينين له
- *لا يمكنه:* التعديل أو الوصول لبيانات مرشحين آخرين

**لوحة التحكم:** `/dashboard/candidate/`

**المزايا:**
- إحصائيات شخصية مفصلة
- قوائم بالمرتكزات والمعرفين
- تتبع عدد الناخبين

### 6. الدعم الفني (Technical Support) - جديد

**الصلاحيات:**
- عرض جميع المرشحين وبياناتهم
- عرض المرتكزات والمعرفين والناخبين
- عرض غرف العمليات
- المساعدة الفنية للمستخدمين
- *لا يمكنه:* حذف البيانات

**لوحة التحكم:** `/dashboard/tech-support/`

**الاستخدام الموصى به:**
- موظف الدعم الفني
- المساعد التقني

### 7. غرفة العمليات (Operations Room) - جديد

**الصلاحيات:**
- عرض الناخبين المرتبطين بالغرفة
- عرض الوكلاء المعينين
- عرض مدراء المراكز
- إحصائيات الغرفة
- *لا يمكنه:* الوصول لبيانات غرف أخرى

**لوحة التحكم:** `/dashboard/ops-room/`

**الاستخدام الموصى به:**
- مشرف غرفة العمليات
- منسق الغرفة الفرعية

---

## إدارة المرشحين

### نظرة عامة

وحدة المرشحين هي القلب النابض للنظام، حيث تُدار جميع بيانات المرشحين المشاركين في الانتخابات.

### الوصول إلى قائمة المرشحين

**المسار:** الصفحة الرئيسية → المرشحين

**الرابط المباشر:** `/candidates/`

### إضافة مرشح جديد

1. انقر على زر **"إضافة مرشح"** من قائمة المرشحين
2. أدخل **رقم الناخب** (سيتم البحث تلقائياً في قاعدة البيانات)
3. إذا كان الرقم موجوداً، ستظهر البيانات تلقائياً:
   - الاسم الكامل
   - تاريخ الميلاد
   - اسم الأم ثلاثي
   - رقم مركز الاقتراع
   - اسم مركز الاقتراع
   - الرقم العائلي
   - اسم مركز التسجيل
   - رقم مركز التسجيل
   - المحافظة
   - رقم المحطة
4. أدخل **رقم الهاتف** (اختياري)
5. أدخل **عنوان السكن** (اختياري)
6. انقر على **"حفظ"**

> **ملاحظة:** سيتم توليد كود المرشح تلقائياً بالصيغة: `03-0001`, `03-0002`, إلخ.

### عرض تفاصيل المرشح

عند النقر على اسم المرشح، ستظهر صفحة تفصيلية تحتوي على:

- **البيانات الشخصية:** الاسم، تاريخ الميلاد، العنوان
- **معلومات الاتصال:** رقم الهاتف، رقم الناخب
- **الإحصائيات:**
  - عدد المرتكزات
  - عدد المعرفين
  - عدد الناخبين
  - عدد المراقبين

### البحث والفلترة

**خيارات البحث:**
- البحث بالاسم
- البحث برقم الناخب
- البحث بكود المرشح
- الترتيب حسب تاريخ الإضافة

### تعديل بيانات المرشح

1. افتح صفحة تفاصيل المرشح
2. انقر على زر **"تعديل"**
3. عدّل البيانات المطلوبة
4. احفظ التغييرات

### حذف مرشح

> **تحذير:** الحذف سيزيل جميع البيانات المرتبطة (المرتكزات، المعرفين، الناخبين)

**الصلاحية المطلوبة:** مدير النظام فقط

---

## إدارة المرتكزات

### تعريف المرتكز

المرتكز هو الشخص الذي يمثل القاعدة الأساسية للمرشح في منطقة معينة، ويرتبط بمجموعة من المعرفين.

### هيكلية المرتكزات

```
مرشح
  └── مرتكز 1
      ├── معرف 1
      │   ├── ناخب 1
      │   ├── ناخب 2
      │   └── ...
      └── معرف 2
          └── ...
  └── مرتكز 2
      └── ...
```

### إضافة مرتكز جديد

**المسار:** المرتكزات → إضافة مرتكز

1. اختر **المرشح** من القائمة المنسدلة
2. أدخل **رقم الناخب**
3. ستظهر البيانات تلقائياً:
   - الاسم الكامل
   - تاريخ الميلاد
   - مركز الاقتراع
   - المحافظة
4. أدخل **رقم الهاتف** (اختياري)
5. اختر **غرفة العمليات** (اختياري)
6. احفظ البيانات

> **كود المرتكز:** يتم توليده تلقائياً بالصيغة:
> - إذا كانت هناك غرفة عمليات: `ROOM-01-03-0001-001`
> - بدون غرفة: `03-0001-001`

### عرض تفاصيل المرتكز

تشمل:
- البيانات الشخصية
- المرشح المرتبط
- غرفة العمليات المرتبطة
- عدد المعرفين التابعين
- عدد الناخبين الإجمالي

### ربط المرتكز بغرفة العمليات

يمكن ربط المرتكز بإحدى غرف العمليات الفرعية لتسهيل التنظيم والتتبع:

1. افتح صفحة تعديل المرتكز
2. اختر الغرفة من قائمة **"غرفة العمليات"**
3. احفظ التغييرات

> **فائدة:** سيتم تحديث كود المرتكز ليشمل رمز الغرفة

---

## إدارة المعرفين

### تعريف المعرف

المعرف هو الشخص المسؤول عن جلب مجموعة من الناخبين وتعريفهم بالمرشح.

### إضافة معرف جديد

**المسار:** المعرفين → إضافة معرف

1. اختر **المرتكز** من القائمة
2. أدخل **رقم الناخب**
3. تظهر البيانات تلقائياً
4. أدخل **رقم الهاتف** (اختياري)
5. اختر **غرفة العمليات** (اختياري)
6. احفظ

> **كود المعرف:** يتم توليده تلقائياً مع رمز المرتكز والغرفة إن وُجدت

### إضافة ناخبين للمعرف

توجد طريقتان:

#### الطريقة الأولى: إضافة فردية

1. افتح صفحة تفاصيل المعرف
2. انقر على **"إضافة ناخب"**
3. أدخل رقم الناخب
4. سيتم التحقق:
   - هل الناخب مسجل مسبقاً؟
   - هل مرتبط بمعرف آخر؟
5. إذا كان متاحاً، انقر **"حفظ"**

#### الطريقة الثانية: إضافة جماعية

1. افتح صفحة تفاصيل المعرف
2. انقر على **"إضافة ناخبين جماعياً"**
3. أدخل أرقام الناخبين، كل رقم في سطر
4. انقر **"معالجة"**
5. ستظهر قائمة بالناخبين الصالحين والمرفوضين
6. راجع القائمة وأكد الإضافة

### إزالة ناخب من المعرف

1. افتح قائمة ناخبي المعرف
2. انقر على **"إزالة"** بجانب الناخب
3. أكد الحذف

---

## إدارة الناخبين

### نظرة عامة

وحدة الناخبين تتيح إدارة شاملة لقاعدة بيانات الناخبين وتصنيفهم.

### البحث عن ناخب

**المسار:** الناخبين → بحث

**خيارات البحث:**
- رقم الناخب
- الاسم الكامل
- رقم الهاتف
- المحافظة
- مركز الاقتراع

### عرض معلومات الناخب

تشمل:
- **البيانات الأساسية:**
  - الاسم الكامل
  - رقم الناخب
  - تاريخ الميلاد
  - اسم الأم
- **معلومات الاقتراع:**
  - رقم ومركز الاقتراع
  - رقم المحطة
  - المحافظة
- **التصنيف:**
  - مؤيد
  - محايد
  - معارض
  - غير محدد
- **الارتباطات:**
  - المعرف المرتبط (إن وُجد)
  - المرتكز (عبر المعرف)
  - المرشح (عبر المرتكز)

### تصنيف الناخبين

لتصنيف ناخب:

1. افتح صفحة تفاصيل الناخب
2. اختر التصنيف من القائمة المنسدلة
3. احفظ التغيير

**التصنيفات المتاحة:**
- **مؤيد:** ناخب داعم للمرشح
- **محايد:** لم يحدد موقفه
- **معارض:** ضد المرشح
- **غير محدد:** لم يتم تصنيفه بعد

### سجل الاتصالات

يمكن تسجيل كل اتصال مع الناخب:

1. افتح صفحة الناخب
2. انقر **"تسجيل اتصال"**
3. أدخل:
   - نوع الاتصال (هاتف، زيارة، رسالة)
   - ملاحظات
   - التاريخ والوقت
4. احفظ

---

## إدارة المراقبين

### أنواع المراقبين

يدعم البرنامج ثلاثة أنواع من المراقبين:

1. **مراقبو المرشحين:** يراقبون لصالح مرشح معين
2. **مراقبو المجتمع المدني:** من منظمات محلية
3. **المراقبون الدوليون:** من منظمات دولية أو سفارات

### إضافة مراقب مرشح

**المسار:** المراقبين → إضافة مراقب

1. اختر **نوع المراقب:** مراقب مرشح
2. اختر **المرشح** من القائمة
3. أدخل **رقم الناخب**
4. تظهر البيانات تلقائياً
5. أدخل:
   - رقم الهاتف
   - البريد الإلكتروني (اختياري)
   - رقم المركز المخصص
   - رقم المحطة (اختياري)
6. احفظ

### إصدار باج للمراقب

1. افتح صفحة تفاصيل المراقب
2. تحقق من استيفاء الشروط:
   - صورة شخصية (مرفوعة)
   - بطاقة الناخب
   - البطاقة الوطنية
   - العمر 18 سنة فما فوق
3. أدخل **رقم الباج**
4. حدد **تاريخ الإصدار**
5. انقر **"إصدار باج"**

### توزيع المراقبين على المراكز

يمكن عرض توزيع المراقبين حسب:
- المركز الانتخابي
- المحطة
- المرشح
- الحالة (مسجل، معتمد، صدر له باج)

---

## نظام توليد بيانات الدخول

### نظرة عامة

هذه الميزة الجديدة تتيح لمدير النظام توليد حسابات دخول للمستخدمين تلقائياً بناءً على أدوارهم.

### الوصول إلى النظام

**الصلاحية المطلوبة:** مدير النظام فقط

**المسار:** المستخدمون → توليد بيانات الدخول

**الرابط المباشر:** `/users/generate-credentials/`

### أنواع الحسابات

#### 1. حسابات المرشحين

**الهدف:** منح المرشحين إمكانية الاطلاع على بياناتهم الخاصة

**خطوات التوليد:**
1. اختر **"المرشحين"** من الخيارات
2. اختر:
   - مرشح معين من القائمة
   - أو "جميع المرشحين (غير المسجلين)"
3. انقر **"توليد الحسابات"**

**ما يتم توليده:**
- **اسم المستخدم:** `cand_030001` (بناءً على كود المرشح)
- **كلمة المرور:** عشوائية (8 أحرف وأرقام)
- **الدور:** مرشح
- **الربط التلقائي:** يتم ربط الحساب بملف المرشح

**ما يستطيع المرشح رؤيته:**
- مرتكزاته
- معرفيه
- ناخبيه
- مراقبيه

#### 2. حسابات الإدارة

**الهدف:** إنشاء حسابات للطاقم الإداري

**خطوات التوليد:**
1. اختر **"الإدارة"**
2. أدخل:
   - الاسم الكامل / الوصف (مثال: "موظف الأرشيف")
   - اسم المستخدم المقترح (اختياري)
3. انقر **"إنشاء حساب"**

**إذا لم يتم تحديد اسم المستخدم:**
سيتم توليد اسم تلقائياً: `admin_a3f9c2`

**الصلاحيات:**
- الأرشيف
- المرشحين
- المهام

#### 3. حسابات الدعم الفني

**الهدف:** إنشاء حسابات لفريق الدعم الفني

**خطوات التوليد:**
1. اختر **"الدعم الفني"**
2. أدخل الاسم
3. انقر **"إنشاء حساب"**

**اسم المستخدم:** `support_b8e1d7`

**الصلاحيات:**
- عرض جميع المرشحين وبياناتهم
- عرض غرف العمليات
- المساعدة الفنية

#### 4. حسابات غرف العمليات

**الهدف:** منح مشرفي الغرف إمكانية متابعة غرفهم

**خطوات التوليد:**
1. اختر **"غرف العمليات"**
2. اختر:
   - غرفة معينة
   - أو "جميع الغرف (غير المسجلة)"
3. انقر **"توليد الحسابات"**

**اسم المستخدم:** `room_ROOM01` (بناءً على كود الغرفة)

**ما يستطيع مشرف الغرفة رؤيته:**
- ناخبي الغرفة
- وكلاء الكيان
- مدراء المراكز

### عرض بيانات الدخول المولدة

بعد التوليد، تظهر **جدول** يحتوي على:
- الاسم / الجهة
- اسم المستخدم
- كلمة المرور
- الدور

**الخيارات المتاحة:**
- **نسخ:** زر بجانب كل حساب لنسخ البيانات
- **طباعة:** طباعة القائمة الكاملة

> **تنبيه أمني:** احفظ كلمات المرور في مكان آمن. لا يمكن استرجاعها لاحقاً.

### نصائح أمنية

1. **غيّر كلمة المرور:** انصح المستخدمين بتغيير كلمة المرور بعد أول تسجيل دخول
2. **التوزيع الآمن:** سلّم بيانات الدخول شخصياً أو عبر قناة آمنة
3. **التوثيق:** احتفظ بسجل للحسابات المولدة

---

## لوحات التحكم

كل دور له لوحة تحكم مخصصة تعرض المعلومات الأكثر أهمية له.

### لوحة مدير النظام

**الرابط:** `/dashboard/admin/`

**الأقسام:**

#### 1. إحصائيات عامة
- إجمالي المستخدمين
- المستخدمون النشطون
- إجمالي الناخبين
- إجمالي المرشحين
- إجمالي المهام
- المهام المعلقة

#### 2. النشاطات الأخيرة
- المستخدمون المضافون حديثاً (آخر 10)
- المهام الأخيرة (آخر 10)

#### 3. إجراءات سريعة
- إضافة مستخدم جديد
- إنشاء مهمة
- عرض التقارير
- توليد بيانات دخول

### لوحة المشرف

**الرابط:** `/dashboard/supervisor/`

**الأقسام:**

#### 1. إحصائيات الناخبين
- إجمالي الناخبين
- الناخبون المخصصون لمعرفين
- المؤيدون
- المحايدون
- المعارضون

#### 2. إحصائيات عامة
- عدد المرشحين
- عدد المرتكزات
- عدد المعرفين

#### 3. سجلات الاتصالات الأخيرة
قائمة بآخر 15 اتصال مع تفاصيل:
- الناخب
- نوع الاتصال
- المستخدم الذي سجل الاتصال
- الوقت

#### 4. المهام
- المهام المسندة إليك
- المهام التي أنشأتها

### لوحة مدخل البيانات

**الرابط:** `/dashboard/data-entry/`

**محتوى ديناميكي حسب نوع مدخل البيانات:**

مثلاً، إذا كان مدخل بيانات ناخبين:
- إجمالي الناخبين
- إدخالاتي اليوم
- آخر 20 ناخب تم إضافتهم

### لوحة المستعرض

**الرابط:** `/dashboard/viewer/`

**الأقسام:**

#### 1. إحصائيات عامة (للقراءة فقط)
- عدد الناخبين
- عدد المرشحين
- عدد المرتكزات
- عدد المعرفين

#### 2. تصنيف الناخبين
- مؤيدون
- محايدون
- معارضون

#### 3. أفضل 10 مرشحين
قائمة بالمرشحين الأكثر حصولاً على أصوات (إن كانت النتائج متاحة)

### لوحة المرشح (جديدة)

**الرابط:** `/dashboard/candidate/`

**شرط الوصول:** يجب أن يكون الحساب مرتبطاً بملف مرشح

**الأقسام:**

#### 1. بطاقة الترحيب
- اسم المرشح
- كود المرشح

#### 2. البطاقات الإحصائية
- **المرتكزات:** العدد الإجمالي + أيقونة
- **المعرفين:** العدد الإجمالي + أيقونة
- **الناخبين:** العدد الإجمالي + أيقونة
- **المراقبين:** العدد الإجمالي + أيقونة

#### 3. قائمة المرتكزات
جدول يعرض:
- الاسم
- الكود
- عدد المعرفين لكل مرتكز

#### 4. قائمة المراقبين
جدول يعرض:
- الاسم
- المركز المخصص
- رقم الهاتف

> **ملاحظة:** المرشح لا يستطيع تعديل أي بيانات، للقراءة فقط

### لوحة الدعم الفني (جديدة)

**الرابط:** `/dashboard/tech-support/`

**الأقسام:**

#### 1. إحصائيات
- عدد المرشحين
- عدد غرف العمليات

#### 2. جدول المرشحين وبياناتهم
جدول شامل يعرض:
- الاسم
- الكود
- عدد المرتكزات
- عدد المعرفين
- عدد الناخبين
- عدد المراقبين

#### 3. جدول غرف العمليات
- اسم الغرفة
- الكود
- المشرف
- عدد المرتكزات
- عدد المعرفين

> **الاستخدام:** يساعد فريق الدعم على رؤية الصورة الشاملة والمساعدة الفنية

### لوحة غرفة العمليات (جديدة)

**الرابط:** `/dashboard/ops-room/`

**شرط الوصول:** يجب أن يكون الحساب مرتبطاً بغرفة عمليات

**الأقسام:**

#### 1. بطاقة الترحيب
- اسم الغرفة
- كود الغرفة

#### 2. البطاقات الإحصائية
- **الناخبون التابعون:** العدد
- **الوكلاء:** العدد
- **مدراء المراكز:** العدد

#### 3. جدول مدراء المراكز
- الاسم
- الكود
- المركز المخصص

#### 4. جدول الوكلاء
- الاسم
- الكود
- المحطة المخصصة

#### 5. أحدث الناخبين المسجلين
آخر 20 ناخب مرتبط بالغرفة:
- الاسم
- رقم الناخب
- المركز
- تاريخ التسجيل

---

## غرف العمليات الفرعية

### نظرة عامة

غرف العمليات الفرعية هي وحدات تنظيمية تساعد في إدارة الحملة على مستوى محلي أو جغرافي.

### إنشاء غرفة عمليات جديدة

**المسار:** غرف العمليات → إضافة غرفة

**البيانات المطلوبة:**
1. **كود الغرفة:** مثل `ROOM-01` (فريد)
2. **اسم الغرفة:** مثل "غرفة الحيدرية"
3. **المشرف:** اختر مستخدم من القائمة (اختياري)
4. **الوصف:** (اختياري)

### إدارة مدراء المراكز

**مدير المركز:** هو الشخص المسؤول عن مركز انتخابي معين.

#### إضافة مدير مركز

1. اذهب إلى **مدراء المراكز → إضافة**
2. أدخل:
   - الاسم الكامل
   - رقم الهاتف
   - رقم الناخب (اختياري)
   - الرقم الوطني (اختياري)
   - نوع الاقتراع (عام أو خاص)
   - **رقم المركز المخصص:** (فريد لكل مدير)
   - **غرفة العمليات:** اختر الغرفة
3. احفظ

> **كود المدير:** سيُولد تلقائياً: `ROOM-01-DIR-001`

### إدارة وكلاء الكيان السياسي

**الوكيل:** ممثل الكيان السياسي في المحطة الانتخابية.

#### إضافة وكيل

1. اذهب إلى **الوكلاء → إضافة**
2. أدخل:
   - الاسم الكامل
   - العمر
   - رقم الناخب
   - الرقم الوطني (اختياري)
   - رقم الهاتف
   - رقم المركز المخصص
   - رقم المحطة
   - **غرفة العمليات**
   - **مدير المركز** (اختياري)
3. احفظ

> **كود الوكيل:** مثال: `ROOM-01-AGT-001`

### لوحة معلومات الغرفة

**المسار:** غرف العمليات → [اسم الغرفة] → لوحة المعلومات

**المحتوى:**
- إحصائيات الغرفة:
  - عدد المرتكزات
  - عدد المعرفين
  - عدد الناخبين
  - عدد المدراء
  - عدد الوكلاء
- قوائم:
  - المرتكزات المرتبطة
  - المعرفين
  - الناخبين
  - المدراء
  - الوكلاء

### تقارير مقارنة الغرف

**المسار:** غرف العمليات → مقارنة

يعرض جدول مقارنة بين جميع الغرف من حيث:
- عدد المرتكزات
- عدد المعرفين
- عدد الناخبين
- الأداء العام

---

## إدخال النتائج

### أنواع الاقتراع

1. **الاقتراع العام:** للمواطنين العاديين
2. **الاقتراع الخاص:** للقوات المسلحة والأمن وبعض الفئات

### إدخال نتائج الاقتراع العام

**المسار:** النتائج → اقتراع عام

**الرابط:** `/vote/count/general/`

#### خطوات الإدخال:

1. **اختر المركز:**
   - أدخل رقم المركز يدوياً
   - أو استخدم ماسح الباركود (انقر **"مسح باركود"**)
2. **اختر المحطة:** ستظهر قائمة بمحطات المركز
3. **أدخل الأصوات:**
   - ستظهر قائمة بالمرشحين
   - أدخل عدد الأصوات لكل مرشح
4. **احفظ البيانات**

> **ملاحظة:** يتم ترتيب المرشحين تلقائياً بحيث تظهر "كتلة الصادقون" أولاً

### إدخال نتائج الاقتراع الخاص

**المسار:** النتائج → اقتراع خاص

**الرابط:** `/vote/count/special/`

نفس الخطوات، لكن يقتصر على مراكز الاقتراع الخاص.

### استخدام ماسح الباركود

1. انقر على **"مسح باركود"**
2. اسمح للكاميرا بالوصول
3. وجّه الكاميرا نحو الباركود
4. سيتم قراءة البيانات تلقائياً:
   - رقم المركز
   - رقم المحطة (إن وُجد)
5. تأكد من البيانات وأكمل الإدخال

### عرض النتائج المجمعة

**المسار:** النتائج → النتائج المجمعة

**الرابط:** `/vote/results/combined/`

**المحتوى:**
- مجموع الأصوات لكل مرشح (عام + خاص)
- النسب المئوية
- الترتيب

### حاسبة سانت-لاغو المعدلة

**الهدف:** توزيع المقاعد البرلمانية حسب طريقة سانت-لاغو المعدلة.

**المسار:** الأدوات → حاسبة سانت-لاغو

**الرابط:** `/tools/sainte-lague/`

#### كيفية الاستخدام:

1. أدخل **عدد المقاعد المتاحة**
2. أدخل أسماء الكتل/الأحزاب وأصواتها:
   - الاسم
   - عدد الأصوات
3. انقر **"حساب"**
4. ستظهر النتيجة:
   - عدد المقاعد لكل كتلة
   - تفاصيل الحسابات

---

## التقارير والإحصائيات

### لوحة التقارير الشاملة

**المسار:** التقارير → التقارير الشاملة

**الرابط:** `/reports/comprehensive/`

### أنواع التقارير

#### 1. تقارير المرشحين

**التصدير:**
- **Excel:** `/reports/candidates/comprehensive/excel/`
- **CSV:** `/reports/candidates/comprehensive/csv/`
- **PDF:** `/reports/candidates/comprehensive/pdf/`

**البيانات المضمنة:**
- كود المرشح
- الاسم
- رقم الناخب
- رقم الهاتف
- عدد المرتكزات
- عدد المعرفين
- عدد الناخبين
- عدد المراقبين

#### 2. تقارير الناخبين

**التصدير:**
- **Excel:** `/reports/voters/comprehensive/excel/`
- **CSV:** `/reports/voters/comprehensive/csv/`

**البيانات المضمنة:**
- رقم الناخب
- الاسم الكامل
- المحافظة
- مركز الاقتراع
- المعرف المرتبط
- التصنيف

#### 3. تقارير المعرفين

**التصدير:**
- **Excel:** `/reports/introducers/excel/`
- **CSV:** `/reports/introducers/csv/`

**البيانات:**
- كود المعرف
- الاسم
- المرتكز التابع
- المرشح
- عدد الناخبين

#### 4. تقارير المرتكزات

**التصدير:**
- **Excel:** `/reports/anchors/excel/`
- **CSV:** `/reports/anchors/csv/`

#### 5. تقارير الأصوات

**التصدير:**
- **Excel:** `/reports/votes/excel/`
- **CSV:** `/reports/votes/csv/`

**البيانات:**
- المركز
- المحطة
- المرشح
- عدد الأصوات
- نوع الاقتراع

#### 6. تقارير مدراء المراكز

**التصدير:**
- **Excel:** `/reports/center-directors/excel/`
- **CSV:** `/reports/center-directors/csv/`

#### 7. تقارير المراقبين

**التصدير:**
- **Excel:** `/reports/monitors/excel/`
- **CSV:** `/reports/monitors/csv/`

#### 8. تقارير الوكلاء

**التصدير:**
- **Excel:** `/reports/agents/excel/`
- **CSV:** `/reports/agents/csv/`

#### 9. تقارير الأرشيف

**التصدير:**
- **Excel:** `/reports/archive/excel/`
- **CSV:** `/reports/archive/csv/`

### التقرير اليومي

**المسار:** التقارير → التقرير اليومي

**المحتوى:**
- الإدخالات اليومية (مرشحين، ناخبين، مرتكزات، معرفين)
- النشاطات
- الإحصائيات

**التصدير:** Excel

---

## الأدوات المساعدة

### البحث الموحد عن جهات الاتصال

**المسار:** الاتصالات → البحث

**الرابط:** `/communications/search/`

**الوظيفة:** البحث الموحد عبر جميع جهات الاتصال:
- المرشحين
- المرتكزات
- المعرفين
- الناخبين
- المراقبين
- مدراء المراكز
- الوكلاء

**خيارات البحث:**
- الاسم
- رقم الهاتف
- رقم الناخب

### تسجيل اتصال

عند العثور على شخص:
1. انقر **"تسجيل اتصال"**
2. أدخل:
   - نوع الاتصال
   - الملاحظات
   - التاريخ
3. احفظ

### عرض سجلات الاتصالات

**المسار:** الاتصالات → السجلات

يعرض جميع الاتصالات المسجلة مع إمكانية الفلترة.

---

## الميزات التقنية

### 1. البحث التلقائي بالرقم الانتخابي

عند إدخال رقم الناخب في أي نموذج (مرشح، مرتكز، معرف، ناخب)، يتم:
1. البحث في قاعدة البيانات المرتبطة
2. جلب البيانات تلقائياً
3. ملء الحقول (الاسم، تاريخ الميلاد، المركز، إلخ)

> **قاعدة البيانات:** `voters_decrypted_fast.sqlite`

### 2. نظام الصلاحيات المتقدم

- كل دور له صلاحيات محددة
- التحقق من الصلاحية قبل كل عملية
- منع الوصول غير المصرح به

### 3. التزامن والعمل دون اتصال (PWA)

البرنامج يدعم:
- **Progressive Web App (PWA)**
- التخزين المحلي للبيانات
- العمل دون اتصال بالإنترنت (محدود)
- التزامن عند الاتصال

### 4. ماسح الباركود

- دعم كامل لقراءة الباركود
- استخدام `html5-qrcode.min.js`
- يدعم قراءة:
  - رقم المركز
  - رقم المحطة
  - بيانات JSON

### 5. الأمان

- **تشفير كلمات المرور:** باستخدام Django's PBKDF2
- **حماية CSRF:** في جميع النماذج
- **جلسات آمنة:** Session management
- **التحقق من الإدخال:** Validation على جانب الخادم والعميل

### 6. واجهة المستخدم

- **تصميم متجاوب:** يعمل على جميع الأجهزة
- **لغة عربية:** واجهة كاملة بالعربية
- **ألوان واضحة:** تدعم الوضع النهاري والليلي
- **سهولة الاستخدام:** تصميم بديهي

---

## الخلاصة

برنامج المكتب الانتخابي هو حل شامل ومتكامل لإدارة الحملات الانتخابية. يوفر:

✅ **نظام أدوار متقدم** مع 8 أنواع مستخدمين  
✅ **إدارة شاملة** للمرشحين، المرتكزات، المعرفين، الناخبين، والمراقبين  
✅ **توليد تلقائي** لبيانات الدخول  
✅ **لوحات تحكم مخصصة** لكل دور  
✅ **إدخال سريع للنتائج** مع دعم الباركود  
✅ **تقارير شاملة** بصيغ متعددة  
✅ **غرف عمليات** لتنظيم أفضل  
✅ **أدوات مساعدة** متنوعة  

---

## معلومات التواصل والدعم

للمساعدة الفنية أو الاستفسارات:
- اتصل بمدير النظام
- أو فريق الدعم الفني

---

**تاريخ الإصدار:** 2026-01-09  
**الإصدار:** 1.0  
**الناشر:** المكتب الانتخابي

---

**ملاحظة نهائية:** هذا الدليل يغطي جميع الميزات الحالية. قد تُضاف ميزات جديدة في التحديثات المستقبلية.
