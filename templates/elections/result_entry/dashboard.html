{% extends 'elections/base.html' %}

{% block title %}Ù„ÙˆØ­Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row mb-4">
        <div class="col-12 text-center">
            <h2>ğŸ—³ï¸ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø®Ø§Ù„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ù†ØªØ®Ø§Ø¨Ø§Øª</h2>
            <p class="text-muted">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {{ request.user.username }}</p>
        </div>
    </div>

    <!-- Stats for this user only -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <h1>{{ stats.today_entries }}</h1>
                    <p>Ø¥Ø¯Ø®Ø§Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ…</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card bg-success text-white">
                <div class="card-body text-center">
                    <h1>{{ stats.total_entries }}</h1>
                    <p>Ø¥Ø¬Ù…Ø§Ù„ Ù…Ø§ Ø£Ø¯Ø®Ù„ØªÙ‡</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-12">
            <a href="{% url 'result_entry_add' %}" class="btn btn-lg btn-warning btn-block font-weight-bold">
                <i class="fas fa-plus-circle"></i> Ø¥Ø¯Ø®Ø§Ù„ Ù†ØªÙŠØ¬Ø© Ø¬Ø¯ÙŠØ¯Ø©
            </a>
        </div>
    </div>

    <!-- Recent Entries Table -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">ğŸ“‹ Ø¢Ø®Ø± 50 Ø¥Ø¯Ø®Ø§Ù„ Ù‚Ù…Øª Ø¨Ù‡</h5>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover mb-0">
                            <thead class="thead-light">
                                <tr>
                                    <th>#</th>
                                    <th>Ø§Ù„Ù…Ø­Ø·Ø©</th>
                                    <th>Ø§Ù„Ù…Ø±Ø´Ø­</th>
                                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                    <th>Ø§Ù„Ø£ØµÙˆØ§Øª</th>
                                    <th>Ø§Ù„ÙˆÙ‚Øª</th>
                                    <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for entry in entries %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>
                                        {{ entry.station.center.name }}
                                        <br>
                                        <small class="text-muted">Ù…Ø­Ø·Ø©: {{ entry.station.station_number }}</small>
                                    </td>
                                    <td>
                                        {{ entry.candidate.full_name }}
                                        <br>
                                        <small class="text-muted">{{ entry.candidate.party.name }}</small>
                                    </td>
                                    <td>
                                        {% if entry.vote_type == 'general' %}
                                        <span class="badge badge-primary">Ø¹Ø§Ù…</span>
                                        {% else %}
                                        <span class="badge badge-warning">Ø®Ø§Øµ</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <span class="font-weight-bold" style="font-size: 1.2em;">{{ entry.vote_count
                                            }}</span>
                                    </td>
                                    <td>{{ entry.entered_at|date:"H:i Y-m-d" }}</td>
                                    <td>{{ entry.notes|default:"-" }}</td>
                                </tr>
                                {% empty %}
                                <tr>
                                    <td colspan="7" class="text-center py-4">
                                        <p class="text-muted">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙŠ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯</p>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}