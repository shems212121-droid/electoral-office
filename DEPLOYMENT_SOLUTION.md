# ๐ ุญู ูุดููุฉ Server Error 500 ุนูู Railway

## โ ุงูุชุญุฏูุซุงุช ุงูุชู ุชู ุชุทุจูููุง

ุชู ุฏูุน ุงูุชุบููุฑุงุช ุงูุชุงููุฉ ุฅูู GitHub:

1. โ **ุฅุตูุงุญ context processor** - ุชู ุฅุนุงุฏุฉ ุชูุนูู `user_profile_context`
2. โ **ุฅุตูุงุญ ุงุณุชูุฑุงุฏ archive** - ุฌุนูู ุงุฎุชูุงุฑูุงู ูุชุฌูุจ ุงูุฃุฎุทุงุก
3. โ **ุชุญุฏูุซ .gitignore** - ููุณูุงุญ ุจุฑูุน ูุงุนุฏุฉ ุจูุงูุงุช ุตุบูุฑุฉ
4. โ **ุฅุถุงูุฉ ุณูุฑูุจุชุงุช ูุณุงุนุฏุฉ** - ูุชุตุฏูุฑ ูุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช

---

## ๐ **ุงููุดููุฉ ุงูุฑุฆูุณูุฉ: ูุงุนุฏุฉ ุงูุจูุงูุงุช**

### ุงููุถุน ุงูุญุงูู:
- ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุญููุฉ: **1.15 GB** (SQLite)
- ุนุฏุฏ ุงูุณุฌูุงุช: **1,868,933 ูุงุฎุจ**
- ุงูุญุฏ ุงูุฃูุตู ูู GitHub: **100 MB** ููููู ุงููุงุญุฏ

### โ **ูุง ูููู ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ุฅูู GitHub**

---

## ๐ก **ุงูุญููู ุงููุชุงุญุฉ**

### **ุงูุญู ุงูููุตู ุจู: ุงุณุชุฎุฏุงู PostgreSQL ุนูู Railway**

#### ุงููุฒุงูุง:
โ ูุงุนุฏุฉ ุจูุงูุงุช ุงุญุชุฑุงููุฉ ููุฅูุชุงุฌ  
โ ุฃุฏุงุก ููุชุงุฒ ูุน 100 ูุณุชุฎุฏู  
โ ูุณุฎ ุงุญุชูุงุทู ุชููุงุฆู  
โ ูุงุจูุฉ ููุชูุณุน  

#### ุงูุฎุทูุงุช:

### **ุงููุฑุญูุฉ 1: ุฅุนุฏุงุฏ PostgreSQL ุนูู Railway** โฑ๏ธ 5 ุฏูุงุฆู

1. **ุงูุชุญ Railway Dashboard:**
   - ุงุฐูุจ ุฅูู: https://railway.app/
   - ุณุฌู ุฏุฎูู ูุงูุชุญ ูุดุฑูุนู

2. **ุฃุถู ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL:**
   - ุงุถุบุท ุฒ+ New"
   - ุงุฎุชุฑ "Database"
   - ุงุฎุชุฑ "PostgreSQL"
   - ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุคูุง (30 ุซุงููุฉ ุชูุฑูุจุงู)

3. **ุงุญุตู ุนูู ูุนูููุงุช ุงูุงุชุตุงู:**
   - ุงุถุบุท ุนูู ุฎุฏูุฉ PostgreSQL
   - ุงุฐูุจ ุฅูู "Variables"
   - ุงูุณุฎ ูููุฉ `DATABASE_URL` (ุณุชุญุชุงุฌูุง ูุงุญูุงู)

---

### **ุงููุฑุญูุฉ 2: ุชุญุฏูุซ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุนูู Railway** โฑ๏ธ 2 ุฏูููุฉ

1. **ุงุฐูุจ ุฅูู ูุดุฑูุน ุงูุชุทุจูู (electoral-office):**
   - ุงุถุบุท ุนูู ุฎุฏูุฉ ุงูุชุทุจูู (ููุณุช ูุงุนุฏุฉ ุงูุจูุงูุงุช)
   - ุงุฐูุจ ุฅูู "Variables"

2. **ุฃุถู/ุญุฏูุซ ุงููุชุบูุฑุงุช ุงูุชุงููุฉ:**

```
DJANGO_SETTINGS_MODULE=electoral_office.settings_production
DEBUG=True
ALLOWED_HOSTS=web-production-42c39.up.railway.app
SECRET_KEY=<ุงุชุฑู ููุง ูู ุฃู ุฃูุดุฆ ูุงุญุฏุฉ ุฌุฏูุฏุฉ>
DATABASE_URL=<ุงูุตู ููุง ูููุฉ DATABASE_URL ูู PostgreSQL>
```

3. **ุงุญูุธ ุงูุชุบููุฑุงุช**

---

### **ุงููุฑุญูุฉ 3: ุฅุนุงุฏุฉ ุงููุดุฑ** โฑ๏ธ 3 ุฏูุงุฆู

1. **ูู Railway Dashboard:**
   - ุงุฐูุจ ุฅูู "Deployments"
   - ุงุถุบุท "Redeploy" ุนูู ุขุฎุฑ deployment
   - ุงูุชุธุฑ ุญุชู ููุชูู ุงููุดุฑ

2. **ุฑุงูุจ ุงูุณุฌูุงุช (Logs):**
   - ุงูุชุญ "View Logs"
   - ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก
   - ุงุจุญุซ ุนู: "Starting gunicorn"

3. **ุงุฎุชุจุฑ ุงููููุน:**
   - ุงูุชุญ: https://web-production-42c39.up.railway.app/test-ping/
   - ูุฌุจ ุฃู ุชุฑู: "Pong - System is Active" โ

---

### **ุงููุฑุญูุฉ 4: ุชุฑุญูู ุงูุจูุงูุงุช ุฅูู PostgeSQL** โฑ๏ธ 30-60 ุฏูููุฉ

ุงูุขู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู Railway **ูุงุฑุบุฉ**. ููููู ุจููู ุงูุจูุงูุงุช:

#### **ุงูุทุฑููุฉ 1: ุชุตุฏูุฑ ูุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช (ุงูููุตู ุจูุง)**

##### ุฃ. ุงูุชุตุฏูุฑ (ูุญููุงู):

```powershell
# ูู ูุฌูุฏ ุงููุดุฑูุน
cd C:\Users\2025\.gemini\antigravity\scratch\electoral_office

# ุชุตุฏูุฑ ุงูุจูุงูุงุช ุฅูู JSON
python export_voter_data.py
```

ูุฐุง ุณููุดุฆ ูุฌูุฏ `voter_data_export` ูุญุชูู ุนูู ูููุงุช JSON ููุณูุฉ.

##### ุจ. ุถุบุท ุงููููุงุช:

```powershell
# ุถุบุท ุงููุฌูุฏ
Compress-Archive -Path voter_data_export -DestinationPath voter_data.zip
```

##### ุฌ. ุฑูุน ุงูุจูุงูุงุช:

**ุฎูุงุฑ 1: ุงุณุชุฎุฏุงู Google Drive/Dropbox**
1. ุงุฑูุน voter_data.zip ุฅูู Google Drive
2. ุงุฌุนู ุงูููู ุนุงูุงู ุฃู ุงุญุตู ุนูู ุฑุงุจุท ูุดุงุฑูุฉ
3. ุงุณุชุฎุฏู ุงูุฑุงุจุท ููุชุญููู ุนูู Railway

**ุฎูุงุฑ 2: ุงุณุชุฎุฏุงู Railway CLI (ุงูุฃุณุฑุน)**

```powershell
# ุซุจุช Railway CLI
npm install -g @railway/cli

# ุณุฌู ุฏุฎูู
railway login

# ุงุฑุจุท ุงููุดุฑูุน
railway link

# ุงุฑูุน ุงูููู
railway run python import_voter_data.py
```

##### ุฏ. ุงูุงุณุชูุฑุงุฏ (ุนูู Railway):

ุณููุดุฆ ุณูุฑูุจุช ุงุณุชูุฑุงุฏ ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ...

---

#### **ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู Django dumpdata/loaddata**

##### ุฃ. ุงูุชุตุฏูุฑ ุงููุญูู:

```powershell
# ุชุตุฏูุฑ ุงููุงุฎุจูู ููุท (ุณูููู ุงูููู ูุจูุฑุงู)
python manage.py dumpdata elections.Voter --format=json --indent=2 > voters_data.json

# ุชุตุฏูุฑ ุจุงูู ุงูุจูุงูุงุช
python manage.py dumpdata elections --exclude elections.Voter --format=json --indent=2 > other_data.json
```

##### ุจ. ุงูุงุณุชูุฑุงุฏ ุนูู Railway:

```bash
# ุนูู Railway Console (ุฅุฐุง ูุชุงุญ) ุฃู ุนุจุฑ CLI
python manage.py loaddata other_data.json
python manage.py loaddata voters_data.json
```

---

#### **ุงูุทุฑููุฉ 3: ุงุณุชุฎุฏุงู pg_dump/pg_restore (ูููุญุชุฑููู)**

##### ุฃ. ุชุญููู SQLite ุฅูู PostgreSQL:

```powershell
# ุงุณุชุฎุฏู ุฃุฏุงุฉ ูุซู pgloader
# ุซุจุชูุง ุฃููุงู: choco install pgloader

# ูู ุจุงูุชุญููู
pgloader db.sqlite3 postgresql://USER:PASSWORD@HOST:PORT/DATABASE
```

---

## ๐ **ููุงุญุธุงุช ูููุฉ**

### ุจุนุฏ ูุฌุงุญ ุงููุดุฑ:

1. **ูู ุจุชุนุทูู DEBUG:**
   ```
   DEBUG=False
   ```

2. **ุบููุฑ ูููุฉ ูุฑูุฑ ุงููุฏูุฑ:**
   - ุณุฌู ุฏุฎูู ุนูู ุงููููุน
   - ุงุฐูุจ ุฅูู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
   - ุบููุฑ ูููุฉ ุณุฑ admin

3. **ุชุญูู ูู ุงูุฃุฏุงุก:**
   - ุฑุงูุจ ุงุณุชุฎุฏุงู ุงูููุงุฑุฏ
   - ุชุฃูุฏ ูู ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ

---

## ๐ **ุงุณุชูุดุงู ุงูุฃุฎุทุงุก**

### ุฅุฐุง ุงุณุชูุฑ ุฎุทุฃ 500:

1. **ุชุญูู ูู ุงูุณุฌูุงุช:**
   ```
   Railway Dashboard โ Deployments โ View Logs
   ```

2. **ุงุจุญุซ ุนู:**
   - `ImportError` - ููุชุจุฉ ูุงูุตุฉ
   - `OperationalError` - ูุดููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - `RuntimeError` - ุฎุทุฃ ูู ุงูุฅุนุฏุงุฏุงุช

3. **ุฃุฎุทุงุก ุดุงุฆุนุฉ:**
   - โ DATABASE_URL ุบูุฑ ูุถุจูุท
   - โ ALLOWED_HOSTS ุบูุฑ ุตุญูุญ  
   - โ ููุชุจุฉ ูุงูุตุฉ ูู requirements.txt

---

## โ **ุจุฏุงุฆู ุณุฑูุนุฉ**

###Fallback: ุงุณุชุฎุฏุงู SQLite ูุคูุชุงู (ุญู ุณุฑูุน)**

ุฅุฐุง ุฃุฑุฏุช ุชุดุบูู ุงููููุน **ููุฑุงู** ุจุฏูู ุจูุงูุงุช:

1. ุงุชุฑู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงุฑุบุฉ
2. ุณูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู ุนูุฏ ุงููุดุฑ
3. ุณุฌู ุฏุฎูู ุจู admin/admin123
4. ุงุฑูุน ุงูุจูุงูุงุช ูุงุญูุงู

**ููุงุญุธุฉ:** ูุฐุง ุณูุนุทูู ูููุน ูุงุฑุบ ููู ูุนูู โ

---

## ๐ **ุงูุฏุนู**

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุฃุนุทูู ูุต ุงูุฎุทุฃ ูู Railway Logs
2. ุงุฎุจุฑูู ุฃู ุฎุทูุฉ ุชุณุจุจุช ูู ุงููุดููุฉ
3. ุณุฃุณุงุนุฏู ูู ุงูุญู ููุฑุงู

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-12  
**ุงูุญุงูุฉ:** โ ุงูููุฏ ุฌุงูุฒ | โณ ูู ุงูุชุธุงุฑ ุชุฑุญูู ุงูุจูุงูุงุช
